<!DOCTYPE html>
<html>
<head>

	<meta charset="UTF-8">
	<link type="text/css" rel="stylesheet" href="sagame_fl2016.css" />
	<title>Logisafe</title>

        
	<script language="javascript" type="text/javascript" src="../freebike/js/jquery-2.1.4.js"></script>
    <script language="javascript" type="text/javascript" src="../freebike/js/jquery-ui.min.js"></script>
    <script language="javascript" type="text/javascript" src="../freebike/js/dexie.js"></script>
    <script language="javascript" type="text/javascript" src="../freebike/js/FileSaver.js"></script>
    <script language="javascript" type="text/javascript" src="../freebike/js/common.js"></script>
    <script language="javascript" type="text/javascript" src="../freebike/js/markerlib.js"></script>
    <script language="javascript" type="text/javascript" src="../freebike/js/sagame.js"></script>
    <script language="javascript" type="text/javascript" src="config/config.js"></script>
    <script language="javascript" type="text/javascript">
    
        
    
        function setupInteractionFL2016() {


            $("#selectGamePractice").click(function() {
                $("#home").hide();
                $("#gameInstructions").show();
                SAGAME.currentClipset = SAGAME.CLIPSETS.practice; 
                SAGAME.currentGameName = 'practice';
            });



            $("#selectGamePilottiB").click(function() {
                $("#home").hide();
                $("#gameInstructions").show();
                SAGAME.currentClipset = SAGAME.CLIPSETS.PilottiB; 
                SAGAME.currentGameName = 'PilottiB';
            });
            
            /*
            $("#selectGamePilottiA").click(function() {
                $("#home").hide();
                $("#gameInstructions").show();
                SAGAME.currentClipset = SAGAME.CLIPSETS.PilottiA; 
                SAGAME.currentGameName = 'PilottiA';
            });
            */


            $("#selectGameTest1").click(function() {
                $("#home").hide();
                $("#gameInstructions").show();
                SAGAME.currentClipset = SAGAME.CLIPSETS.Test1; 
                SAGAME.currentGameName = 'Test1';
            });

            $("#selectGameTest2").click(function() {
                $("#home").hide();
                $("#gameInstructions").show();
                SAGAME.currentClipset = SAGAME.CLIPSETS.Test2;
                SAGAME.currentGameName = 'Test2';                
            });

            $("#selectGameTest3").click(function() {
                $("#home").hide();
                $("#gameInstructions").show();
                SAGAME.currentClipset = SAGAME.CLIPSETS.Test3;
                SAGAME.currentGameName = 'Test3';                
            });
            
            $("#selectGameT1").click(function() {
                $("#home").hide();
                $("#gameInstructions").show();
                SAGAME.currentClipset = SAGAME.CLIPSETS.T1;
                SAGAME.currentGameName = 'T1';                
            });
            
            $("#selectGameT2").click(function() {
                $("#home").hide();
                $("#gameInstructions").show();
                SAGAME.currentClipset = SAGAME.CLIPSETS.T2;
                SAGAME.currentGameName = 'T2';                
            });

            $("#selectGameT3").click(function() {
                $("#home").hide();
                $("#gameInstructions").show();
                SAGAME.currentClipset = SAGAME.CLIPSETS.T3;
                SAGAME.currentGameName = 'T3';                
            });


            $("#selectGameT4").click(function() {
                $("#home").hide();
                $("#gameInstructions").show();
                SAGAME.currentClipset = SAGAME.CLIPSETS.T4;
                SAGAME.currentGameName = 'T4';                
            });

            $("#selectGameT5").click(function() {
                $("#home").hide();
                $("#gameInstructions").show();
                SAGAME.currentClipset = SAGAME.CLIPSETS.T5;
                SAGAME.currentGameName = 'T5';                
            });


            /*
            $("#selectGameF").click(function() {
                $("#home").hide();
                $("#gameInstructions").show();
                SAGAME.currentClipset = SAGAME.CLIPSETS.F;
                SAGAME.currentGameName = 'F';                
            });
            
            $("#selectGameOngelmat").click(function() {
                $("#home").hide();
                $("#gameInstructions").show();
                SAGAME.currentClipset = SAGAME.CLIPSETS.Ongelmat;
                SAGAME.currentGameName = 'Ongelmat';
            });
            */
        }
        
        
		$(document).ready(function() {
            console.log("0");
            var req1 = loadClipsetsFrom(clipsets_json);
            console.log("1");
            
            req1.done( function() { 
                var req2 = loadTargetsFrom(targets_json);
                
                req2.done( function() { 
                    
                    setupInteraction();
                    setupInteractionFL2016(); 
                    
                }).fail(function(err) {
                    console.log("Loading targets failed")
                    console.log(err);
                });
            }).fail(function(err) {
                console.log("Loading clipsets failed")
                console.log(err);
            });
        
            
        
        });
    </script>

</head>

<body>

    <div id="login" class="loginScreen">
        
        <h1>Logisafe</h1>
        
        <p>
        Syötä pelaajatunnuksesi
        <input id="playerId" type="text" value="" />
        </p>
        
        <p>
        <button id="loginButton">Aloita</button>
        
        
        <!-- <button id="showGameInstructions">Aloita</button> -->
        </p>

    </div>

    <div id="home" class="instructions">
        <!-- 
        <p><button id="selectGameAB">Pelaa A ja B</button><span id="scores_Harjoittelu"></span> </p>
        <p><button id="selectGameC">Pelaa C</button></p>
        <p><button id="selectGameD1">Pelaa D1</button></p>
        <p><button id="selectGameD2">Pelaa D2</button></p>
        <p><button id="selectGameF">Pelaa F</button></p>
        <p><button id="selectGameOngelmat">Duplikaattivideot (?)</button></p>
        -->
        
        <h1>Valitse peli</h1>
        
        <div id="gameLabelContainer"> 
        
            <div class="gameLabel">
                <button id="selectGamePractice">Harjoittelu
                <br />
                <span id="scores_practice"></span>
                </button>
            </div>
            
            <!--
             <div class="gameLabel">
                <button id="selectGamePilottiA">Pilotti A (vanha)<br >
                <span id="scores_PilottiA"></span> 
                </button>
            </div> 
            -->
            <div class="gameLabel">
                <button id="selectGamePilottiB">Pilottitesti<br >
                <span id="scores_PilottiB"></span> 
                </button>
            </div>

            
            <div class="gameLabel">
                <button id="selectGameTest1">
                    Testi 1
                    <br />
                    <span id="scores_Test1"></span>
                </button>
            </div>
            
            <div class="gameLabel">
                <button id="selectGameTest2">Testi 2
                <br />
                <span id="scores_Test2"></span>
                </button>                
            </div>
            
            
            <div class="gameLabel">
                <button id="selectGameTest3">Testi 3
                <br />
                <span id="scores_Test3"></span> 
                </button>
            </div>
            
            
            <div class="gameLabel">
                <button id="selectGameT1">Peli 1
                <br />
                <span id="scores_T1"></span>
                </button>                
            </div>
            
            <div class="gameLabel">
                <button id="selectGameT2">Peli 2
                <br />
                <span id="scores_T2"></span>
                </button>                
            </div>


            <div class="gameLabel">
                <button id="selectGameT3">Peli 3
                <br />
                <span id="scores_T3"></span>
                </button>                
            </div>


            <div class="gameLabel">
                <button id="selectGameT4">Peli 4
                <br />
                <span id="scores_T4"></span>
                </button>                
            </div>

            <div class="gameLabel">
                <button id="selectGameT5">Peli 5
                <br />
                <span id="scores_T5"></span>
                </button>                
            </div>


            <!--
            <div class="gameLabel">
                <button id="selectGameF">Setti F</button>
                <br />
                <span id="scores_F"></span>
                </button>
            </div>
            -->
            
        </div> 

        <!--
        <div>
            <p>Pikanäppäimet:<p>
            <p>a = seuraava video, z = edellinen video, r = uudestaan, c = piilota/näytä maski</p>
        </div>
        -->
    </div>


    
    <div id="endInstructions" class="instructions">
        <p>Hienoa! Pelasit kaikki videot.</p>
        
        <p><button id="goHomeAfterGameButton">OK</button></p>

    </div>

    <div id="practiceInstructions" class="instructions">
        
        <h1>Ohjeet</h1>
                
        
        <p>Pelissä näet videoita trukinkuljettajan näkökulmasta. <br /><br />
        Jossain vaiheessa video pysähtyy ja kuva muuttuu harmaaksi. <br /><br />
        Harmaalla taustalla on kaksi ympyrää.<br /><br /> 
        Valitse ympyröistä se jonka kohdalla 
        oli turvallisuuden kannalta tärkein huomioitava tai varottava asia. 
        </p>
        <!-- <p>Oikeasta valinnasta saat pisteen ja väärästä menetät.</p> -->
        <p>Oikeasta valinnasta saat yhden pisteen, tai kaksi jos vastaat nopeasti.</p>
        <p>Väärästä valinnasta menetet yhden pisteen, tai kaksi jos vastaat hätiköidysti.</p>
        <br />
        <button id="startPractice">Pelaa</button>
    </div>


    <div id="gameInstructions" class="instructions">
        <h1>Ohjeet</h1>
        <p>Pelissä näet videoita trukinkuljettajan näkökulmasta. <br /><br />
        Jossain vaiheessa video pysähtyy ja kuva muuttuu harmaaksi. <br /><br />
        Harmaalla taustalla kaksi ympyrää.<br /><br /> 
        Valitse ympyröistä se jonka kohdalla 
        oli turvallisuuden kannalta tärkein huomioitava tai varottava asia. 
        </p>
        <p>Oikeasta valinnasta saat yhden pisteen, tai kaksi jos vastaat nopeasti.</p>
        <p>Väärästä valinnasta menetet yhden pisteen, tai kaksi jos vastaat hätiköidysti.</p>
        <br />
        <button id="startGame">Pelaa</button>
    </div>

    <!-- This should not be here. -->
    <div id="calibrationInstruction" class="instructions">        
        <p>Tässä välissä kalibroidaan silmänliikekamera</p>
        <p><br /><br /></p>
        <p><button id="calibrationInstructionContinue">Jatka</button></p>
    </div>

    <div id="currentvideo"></div>

    <div class="target" id="target_template"></div>	

    <div id="screen">
        <div id="points">0</div>
        <div id="exitGameButton">Keskeytä</div>
        <video id="videoplayer" src="" preload="auto" muted></video> 
    </div>

    <div id="videoMask">
    </div>
    
    <div id="videoLoadingMsg"><p>Ladataan videota...</p></div>

    <button id="checkbutton">Tarkista</button> 
    <button id="nextbutton">Seuraava</button>
    
    
    <div class="query_feedback" id="query_feedback_template"></div>
	<div class="query_box" id="query_box_template"></div>
    <div class="query_multiple_choice" id="query_multiple_choice_template"></div>

    <!--
    <div id="mc_comment_box" class="mc_comment_box">
    
        <p id="mc_item_template_1">
            <input type="radio" name="mcItem1_selected" /><span id="mcItem1_text">RAi 1</span>
        </p>
        
        <p id="mc_item_template_2">
            <input type="radio" name="mcItem2_selected" /><span id="mcItem2_text">RAi 2</span>
        </p>
        
        <p id="mc_item_template_3">
            <input type="radio" name="mcItem3_selected" /><span id="mcItem3_text">Rai 3</span>
        </p>
    
    </div>
    -->
        
    
    <audio id="targethitplayer" src="media/targethit.mp3"></audio>
    <audio id="missplayer" src="media/188039__antumdeluge__bicycle-horn.wav"></audio>
    
    <!-- <img id="marker1" src="media/marker1.png" />
    <img id="marker2" src="media/marker2.png" />
    <img id="marker3" src="media/marker3.png" />
    <img id="marker4" src="media/marker4.png" /> -->
    
    
</body>
</html>
